---
title: >-
  [백준/코틀린] 1043번: 거짓말
difficulty: 골드 4
categories: [백준, CLASS 4]
tags: [Kotlin, 자료 구조, 분리 집합, 유니온 파인드]
description: 유니온 파인드로 진실을 아는 사람들과 연결 여부를 관리해 거짓말 가능한 파티 수를 구하는 Kotlin 분리 집합 문제입니다.
---

## 링크
[1043번: 거짓말](https://www.acmicpc.net/problem/1043)

## 유니온 파인드 (Union-Find)
<span class="txt_bg">유니온 파인드</span>란?\
두 개의 연산을 통해 서로 겹치지 않는 여러 집합을 관리하는 자료구조입니다.
- **Union**: 두 원소를 같은 집합으로 합친다.
- **Find**: 해당 원소가 속한 집합을 찾는다.

## 경로 압축 (Path Compression)
![path compression.png](../assets/1043/path%20compression.png){: w="500" }
_경로 압축_

트리로 집합을 구현하면 트리가 한쪽으로 치우칠 수 있습니다.\
<span class="txt_bg">경로 압축</span>은 `find` 연산 중 거쳐간 노드들의 부모를 루트로 바꿔,\
이후 `find`를 더 빠르게 만드는 최적화 방식입니다.\
(= "<span class="txt_bg">루트를 찾는 김에 부모를 루트로 바꿔버리기</span>")

```kotlin
parents[v] = find(parents[v])
```

## 풀이
<span class="txt_bg">유니온 파인드(분리 집합)</span>로 사람들을 묶어 연결 관계를 관리합니다.

진실을 아는 모든 사람을 `TRUTH_CLUB`과 `union`하고,\
각 파티에 참석한 사람들은 모두 같은 그룹이 되도록 `union`합니다.

이후 각 파티에 대해,\
참석자 중 <span class="txt_bg">진실 그룹과 같은 집합에 속한 사람이 한 명이라도 있으면</span> 거짓말을 할 수 없습니다.\
진실 그룹과 연결되지 않은 파티의 개수를 세어 출력합니다.

<br>

> [[UnionFind] Union Find의 최적화](https://justicehui.github.io/medium-algorithm/2019/01/01/UnionFind3/)
{: .prompt-info }

## 코드
```kotlin
lateinit var parents: IntArray
lateinit var parties: List<List<Int>>
const val TRUTH_CLUB = 0

fun union(u: Int, v: Int) {
    val pu = find(u)
    val pv = find(v)

    if (pu != pv) parents[pu] = pv
}

fun find(v: Int): Int {
    if (parents[v] == v) return v

    parents[v] = find(parents[v])
    return parents[v]
}

fun main() {
    val (n, m) = readln().split(" ").map { it.toInt() }
    parents = IntArray(n + 1) { it }

    readln().split(" ").map { it.toInt() }.drop(1)
        .forEach { union(TRUTH_CLUB, it) }

    parties = List(m) { readln().split(" ").map { it.toInt() }.drop(1) }
        .onEach { party -> party.zipWithNext().forEach { union(it.first, it.second) } }

    println(parties.count { party -> party.none { find(it) == find(TRUTH_CLUB) } })
}

```
